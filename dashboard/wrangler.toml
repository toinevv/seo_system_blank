name = "indexyourniche"
compatibility_date = "2024-12-30"
compatibility_flags = ["nodejs_compat"]
main = ".open-next/worker.js"

# Assets (static files)
assets = { directory = ".open-next/assets", binding = "ASSETS" }

# Custom domain routes
routes = [
  { pattern = "indexyourniche.com", custom_domain = true },
  { pattern = "www.indexyourniche.com", custom_domain = true }
]

# Observability - Worker logs and invocation tracking
[observability]
enabled = true

[observability.logs]
enabled = true
invocation_logs = true

# Environment variables
# IMPORTANT: NEXT_PUBLIC_* vars must also be set in Domaly/Cloudflare build settings
# because Next.js inlines them at build time into the client bundle.
[vars]
ENVIRONMENT = "production"
NEXT_PUBLIC_GA_ID = "G-XXXXXXXXXX"
# These are public values (safe to commit) - the anon key only allows RLS-protected access
NEXT_PUBLIC_SUPABASE_URL = "https://fvtkaqqpbkvgftjcartz.supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ2dGthcXFwYmt2Z2Z0amNhcnR6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzODY2NjIsImV4cCI6MjA4Mzk2MjY2Mn0.8Y8E3pX64fh6Agt8FzJgHmkXeZpjEhWTAdjyY0WrCg8"

# Secrets (set via wrangler secret put SECRET_NAME)
# Run these commands to set secrets:
#   cd dashboard
#   npx wrangler secret put SUPABASE_SERVICE_ROLE_KEY
#   npx wrangler secret put ENCRYPTION_KEY
#   npx wrangler secret put STRIPE_SECRET_KEY
#   npx wrangler secret put STRIPE_WEBHOOK_SECRET
#   npx wrangler secret put STRIPE_PRICE_STARTER_BASE
#   npx wrangler secret put STRIPE_PRICE_STARTER_GEO
#   npx wrangler secret put STRIPE_PRICE_PRO_BASE
#   npx wrangler secret put STRIPE_PRICE_PRO_GEO
#   npx wrangler secret put STRIPE_PRICE_BUSINESS_BASE
#   npx wrangler secret put STRIPE_PRICE_BUSINESS_GEO

name = "seo-content-generator"
main = "src/entry.py"
compatibility_date = "2024-12-30"
compatibility_flags = ["python_workers"]

# Cron Triggers - runs every hour to check for scheduled generations
[triggers]
crons = ["0 * * * *"]  # Every hour at minute 0

# Environment variables (set these in Cloudflare dashboard or via wrangler secret)
# CENTRAL_SUPABASE_URL = "https://xxx.supabase.co"
# CENTRAL_SUPABASE_SERVICE_KEY = "your-service-key"
# ENCRYPTION_KEY = "your-32-byte-base64-key"

[vars]
ENVIRONMENT = "production"

# Enable observability for debugging
[observability]
enabled = true

[observability.logs]
enabled = true
invocation_logs = true

# Bindings for secrets (set via: wrangler secret put SECRET_NAME)
# Required:
# - CENTRAL_SUPABASE_URL        (your central Supabase project URL)
# - CENTRAL_SUPABASE_SERVICE_KEY (service role key for central DB)
# - ENCRYPTION_KEY               (32-byte base64 key for API key decryption)
#
# Optional (for Google Custom Search topic discovery):
# - GOOGLE_SEARCH_API_KEY        (Google Cloud API key)
# - GOOGLE_SEARCH_CX_ID          (Custom Search Engine ID)

# Optional: KV namespace for caching
# [[kv_namespaces]]
# binding = "CACHE"
# id = "your-kv-namespace-id"
